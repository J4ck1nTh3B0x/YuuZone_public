import{a as re,A as se,r as h,Q as c,j as t,S as M,M as R}from"./vendor_react_core-BgINF0UJ.js";import{a as g}from"./vendor_axios-NIGUFBhG.js";import"./vendor_other-DbdEjI2z.js";import"./vendor_socket_io_client-DCrnUc9D.js";function me(){const{t:s}=re(),{user:w}=se(),[N,E]=h.useState("avatars"),[L,U]=h.useState([]),[V,q]=h.useState([]),[W,D]=h.useState(!0),[S,p]=h.useState(!1),[l,C]=h.useState(""),[i,m]=h.useState({}),[b,H]=h.useState(null),[Q,z]=h.useState([]),[P,_]=h.useState(!1),[de,y]=h.useState([]),[ie,v]=h.useState(!1),[o,f]=h.useState(null),[d,x]=h.useState({});h.useEffect(()=>{u()},[]);const u=async()=>{try{D(!0);const[e,a]=await Promise.all([g.get("/api/coins/admin/avatar-categories"),g.get("/api/coins/admin/coin-packages")]);e.data.success&&U(e.data.categories),a.data.success&&q(a.data.packages)}catch(e){console.error("Error fetching data:",e),c.error(s("coins.fetchError"))}finally{D(!1)}},B=async()=>{var e,a;try{(await g.post("/api/coins/admin/avatar-categories",i)).data.success&&(c.success(s("coins.categoryCreated")),p(!1),m({}),y([]),v(!1),u())}catch(r){console.error("Error creating category:",r),c.error(((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.error)||s("coins.createError"))}},G=async()=>{var e,a;try{(await g.post("/api/coins/admin/coin-packages",i)).data.success&&(c.success(s("coins.packageCreated")),p(!1),m({}),y([]),v(!1),u())}catch(r){console.error("Error creating package:",r),c.error(((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.error)||s("coins.createError"))}},J=()=>{const e=[],a=o?d:i;return l==="category"?((!a.name||a.name.trim()==="")&&e.push("Category Name is required"),(!a.description||a.description.trim()==="")&&e.push("Description is required")):l==="package"?((!a.name||a.name.trim()==="")&&e.push("Package Name is required"),(!a.coin_amount||a.coin_amount<=0)&&e.push("Coin Amount must be greater than 0"),(!a.price_vnd||a.price_vnd<=0)&&e.push("Price (VND) must be greater than 0")):l==="avatar"&&((!a.name||a.name.trim()==="")&&e.push("Avatar Name is required"),(!a.price_coins||a.price_coins<=0)&&e.push("Price (Coins) must be greater than 0"),o||(a.uploadMethod==="file"?a.imageFile||e.push("Please select an image file"):a.uploadMethod==="url"&&(!a.image_url||a.image_url.trim()===""?e.push("Image URL is required"):!a.image_url.startsWith("http://")&&!a.image_url.startsWith("https://")&&e.push("Image URL must be a valid HTTP/HTTPS URL")))),e},K=()=>{const e=J();if(e&&Array.isArray(e)&&e.length>0){y(e),v(!0);return}o?l==="category"?$():l==="package"?I():l==="avatar"&&T():l==="category"?B():l==="package"?G():l==="avatar"&&ae()},F=e=>{C(e),y([]),v(!1),m(e==="avatar"?{uploadMethod:"file"}:{}),p(!0)},O=async e=>{var a,r;if(window.confirm("Are you sure you want to delete this category?"))try{(await g.delete(`/api/coins/admin/avatar-categories/${e}`)).data.success&&(c.success("Category deleted successfully"),u())}catch(n){console.error("Error deleting category:",n),c.error(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.error)||"Failed to delete category")}},X=async e=>{var a,r;if(window.confirm("Are you sure you want to delete this package?"))try{(await g.delete(`/api/coins/admin/coin-packages/${e}`)).data.success&&(c.success("Package deleted successfully"),u())}catch(n){console.error("Error deleting package:",n),c.error(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.error)||"Failed to delete package")}},Y=async e=>{var a,r;if(window.confirm("Are you sure you want to delete this avatar?"))try{(await g.delete(`/api/coins/admin/avatars/${e}`)).data.success&&(c.success("Avatar deleted successfully"),j(b.id))}catch(n){console.error("Error deleting avatar:",n),c.error(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.error)||"Failed to delete avatar")}},$=async()=>{var e,a;try{(await g.put(`/api/coins/admin/avatar-categories/${o.id}`,d)).data.success&&(c.success("Category updated successfully"),f(null),x({}),u())}catch(r){console.error("Error updating category:",r),c.error(((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.error)||"Failed to update category")}},I=async()=>{var e,a;try{(await g.put(`/api/coins/admin/coin-packages/${o.id}`,d)).data.success&&(c.success("Package updated successfully"),f(null),x({}),u())}catch(r){console.error("Error updating package:",r),c.error(((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.error)||"Failed to update package")}},T=async()=>{var e,a;try{const r=new FormData;r.append("name",d.name),r.append("description",d.description||""),r.append("price_coins",d.price_coins),d.uploadMethod==="file"&&d.imageFile?r.append("image",d.imageFile):d.uploadMethod==="url"&&d.image_url&&r.append("image_url",d.image_url),(await g.put(`/api/coins/admin/avatars/${o.id}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(c.success("Avatar updated successfully"),f(null),x({}),j(b.id))}catch(r){console.error("Error updating avatar:",r),c.error(((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.error)||"Failed to update avatar")}},A=(e,a)=>{f(e),C(a),x({name:e.name,description:e.description||"",coin_amount:e.coin_amount,price_vnd:e.price_vnd,price_coins:e.price_coins,image_url:e.image_url,uploadMethod:"url"}),p(!0)},Z=async(e,a)=>{var r,n;try{(await g.patch(`/api/coins/admin/avatar-categories/${e}/toggle`,{is_active:!a})).data.success&&(c.success(`Category ${a?"disabled":"enabled"} successfully`),u())}catch(k){console.error("Error toggling category:",k),c.error(((n=(r=k.response)==null?void 0:r.data)==null?void 0:n.error)||"Failed to toggle category")}},ee=async(e,a)=>{var r,n;try{(await g.patch(`/api/coins/admin/coin-packages/${e}/toggle`,{is_active:!a})).data.success&&(c.success(`Package ${a?"disabled":"enabled"} successfully`),u())}catch(k){console.error("Error toggling package:",k),c.error(((n=(r=k.response)==null?void 0:r.data)==null?void 0:n.error)||"Failed to toggle package")}},te=async e=>{H(e),await j(e.id),_(!0)},j=async e=>{try{const a=await g.get(`/api/coins/admin/avatar-categories/${e}/avatars`);a.data.success&&z(a.data.avatars)}catch(a){console.error("Error fetching category avatars:",a),c.error("Failed to fetch category avatars")}},ae=async()=>{var e,a;try{let r={...i,category_id:b.id};if(i.imageFile){const n=new FormData;n.append("image",i.imageFile),n.append("name",i.name),n.append("description",i.description||""),n.append("price_coins",i.price_coins),n.append("category_id",b.id),(await g.post("/api/coins/admin/avatars/upload",n,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(c.success(s("coins.avatarUploaded")),p(!1),m({}),y([]),v(!1),j(b.id))}else(await g.post("/api/coins/admin/avatars",r)).data.success&&(c.success(s("coins.avatarCreated")),p(!1),m({}),y([]),v(!1),j(b.id))}catch(r){console.error("Error creating avatar:",r),c.error(((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.error)||s("coins.avatarCreateError"))}};return W?t.jsx("div",{className:"flex justify-center items-center min-h-screen",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-theme-blue"})}):t.jsxs("div",{className:"min-h-screen bg-theme-light-gray2 dark:bg-theme-dark-bg pt-20 px-4",children:[t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsx("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg shadow-md p-6 mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-2",children:s("coins.manageAvatarsAndCoinPackages")}),t.jsx("p",{className:"text-theme-text-secondary dark:text-theme-dark-text-secondary mt-2",children:"Manage avatars and coin packages"})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:["Welcome, ",w==null?void 0:w.username]}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:"SuperManager"})]})]})}),t.jsx("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg shadow-md p-4 mb-6",children:t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("button",{onClick:()=>E("avatars"),className:`px-6 py-2 rounded-lg font-medium transition-colors flex items-center justify-center whitespace-normal ${N==="avatars"?"bg-theme-blue text-white":"text-theme-text-primary dark:text-theme-dark-text hover:bg-theme-bg-hover"}`,children:[t.jsx("span",{className:"mr-2",children:"ðŸ‘¤"}),t.jsx("span",{className:"text-center",children:"Avatar Categories"})]}),t.jsxs("button",{onClick:()=>E("packages"),className:`px-6 py-2 rounded-lg font-medium transition-colors flex items-center justify-center whitespace-normal ${N==="packages"?"bg-theme-blue text-white":"text-theme-text-primary dark:text-theme-dark-text hover:bg-theme-bg-hover"}`,children:[t.jsx(M,{type:"coin",className:"w-5 h-5 mr-2 flex-shrink-0"}),t.jsx("span",{className:"text-center",children:"Coin Packages"})]})]})}),t.jsxs("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg shadow-md p-6",children:[N==="avatars"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-theme-text-primary dark:text-theme-dark-text",children:"Avatar Categories"}),t.jsx("button",{onClick:()=>F("category"),className:"bg-theme-blue text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"+ Add Category"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map(e=>t.jsxs("div",{className:"bg-theme-bg-primary dark:bg-theme-dark-bg rounded-lg border border-theme-border-light dark:border-theme-dark-border p-4",children:[t.jsx("div",{className:"mb-2",children:t.jsx("h3",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:e.name})}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mb-2",children:e.description||s("coins.noDescription")}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.is_active?"Active":"Inactive"}),t.jsxs("span",{className:"text-xs text-theme-text-secondary dark:text-theme-dark-text-secondary",children:["ID: ",e.id]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>te(e),className:"flex-1 text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition-colors",children:s("coins.manageAvatars")}),t.jsx("button",{onClick:()=>A(e,"category"),className:"flex-1 text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors",children:"Edit"}),t.jsx("button",{onClick:()=>Z(e.id,e.is_active),className:`flex-1 text-xs px-2 py-1 rounded transition-colors ${e.is_active?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-green-500 text-white hover:bg-green-600"}`,children:e.is_active?"Disable":"Enable"}),t.jsx("button",{onClick:()=>O(e.id),className:"flex-1 text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors",children:"Delete"})]})]},e.id))})]}),N==="packages"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-theme-text-primary dark:text-theme-dark-text",children:"Coin Packages"}),t.jsx("button",{onClick:()=>F("package"),className:"bg-theme-blue text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"+ Add Package"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(e=>t.jsxs("div",{className:"bg-theme-bg-primary dark:bg-theme-dark-bg rounded-lg border border-theme-border-light dark:border-theme-dark-border p-4",children:[t.jsx("div",{className:"mb-2",children:t.jsx("h3",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:e.name})}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:"Coins:"}),t.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400 font-bold flex items-center",children:[t.jsx(M,{type:"coin",className:"w-4 h-4 mr-1"}),e.coin_amount]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:"Price:"}),t.jsxs("span",{className:"font-bold",children:[e.price_vnd.toLocaleString()," VND"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.is_active?"Active":"Inactive"}),t.jsxs("span",{className:"text-xs text-theme-text-secondary dark:text-theme-dark-text-secondary",children:["ID: ",e.id]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>A(e,"package"),className:"flex-1 text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors",children:"Edit"}),t.jsx("button",{onClick:()=>ee(e.id,e.is_active),className:`flex-1 text-xs px-2 py-1 rounded transition-colors ${e.is_active?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-green-500 text-white hover:bg-green-600"}`,children:e.is_active?"Disable":"Enable"}),t.jsx("button",{onClick:()=>X(e.id),className:"flex-1 text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors",children:"Delete"})]})]},e.id))})]})]})]}),S&&t.jsx(R,{showModal:S,setShowModal:p,children:t.jsxs("div",{className:`bg-white dark:bg-theme-dark-card rounded-lg p-8 mx-auto w-full h-full max-h-full overflow-y-auto ${l==="avatar"?"max-w-6xl":"max-w-4xl"}`,children:[t.jsx("h2",{className:"text-3xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-6",children:s(o?l==="category"?"coins.editAvatarCategory":l==="package"?"coins.editCoinPackage":"coins.editAvatar":l==="category"?"coins.createAvatarCategory":l==="package"?"coins.createCoinPackage":"coins.uploadAvatar")}),l==="category"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[s("coins.categoryName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:o?d.name||"":i.name||"",onChange:e=>o?x({...d,name:e.target.value}):m({...i,name:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:s("coins.enterCategoryName")})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[s("coins.description")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:o?d.description||"":i.description||"",onChange:e=>o?x({...d,description:e.target.value}):m({...i,description:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:s("coins.enterDescription"),rows:"4"})]})]}),l==="package"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[s("coins.packageName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:o?d.name||"":i.name||"",onChange:e=>o?x({...d,name:e.target.value}):m({...i,name:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:s("coins.enterPackageName")})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[s("coins.coinAmount")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:o?d.coin_amount||"":i.coin_amount||"",onChange:e=>o?x({...d,coin_amount:parseInt(e.target.value)}):m({...i,coin_amount:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:s("coins.enterCoinAmount")})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[s("coins.priceVND")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:o?d.price_vnd||"":i.price_vnd||"",onChange:e=>o?x({...d,price_vnd:parseInt(e.target.value)}):m({...i,price_vnd:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:s("coins.enterPriceVND")})]})]}),l==="avatar"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[s("coins.avatarName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:o?d.name||"":i.name||"",onChange:e=>o?x({...d,name:e.target.value}):m({...i,name:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:s("coins.enterAvatarName")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:"Description"}),t.jsx("textarea",{value:o?d.description||"":i.description||"",onChange:e=>o?x({...d,description:e.target.value}):m({...i,description:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:"Enter description",rows:"3"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:["Avatar Image ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"radio",name:"uploadMethod",value:"file",checked:(o?d.uploadMethod:i.uploadMethod)==="file",onChange:e=>o?x({...d,uploadMethod:e.target.value}):m({...i,uploadMethod:e.target.value}),className:"w-5 h-5 text-theme-blue"}),t.jsx("span",{className:"text-lg text-theme-text-primary dark:text-theme-dark-text",children:"Upload File"})]}),t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"radio",name:"uploadMethod",value:"url",checked:(o?d.uploadMethod:i.uploadMethod)==="url",onChange:e=>o?x({...d,uploadMethod:e.target.value}):m({...i,uploadMethod:e.target.value}),className:"w-5 h-5 text-theme-blue"}),t.jsx("span",{className:"text-lg text-theme-text-primary dark:text-theme-dark-text",children:"Enter URL"})]})]}),(o?d.uploadMethod:i.uploadMethod)==="file"?t.jsx("div",{className:"mt-3",children:t.jsx("input",{type:"file",accept:"image/*",onChange:e=>o?x({...d,imageFile:e.target.files[0]}):m({...i,imageFile:e.target.files[0]}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text"})}):t.jsx("div",{className:"mt-3",children:t.jsx("input",{type:"url",value:o?d.image_url||"":i.image_url||"",onChange:e=>o?x({...d,image_url:e.target.value}):m({...i,image_url:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:"Enter image URL"})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:["Price (Coins) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:o?d.price_coins||"":i.price_coins||"",onChange:e=>o?x({...d,price_coins:parseInt(e.target.value)}):m({...i,price_coins:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:"100"})]})]}),t.jsxs("div",{className:"flex space-x-4 mt-8",children:[t.jsx("button",{onClick:o?l==="category"?$:l==="package"?I:T:K,className:"flex-1 bg-theme-blue text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors font-medium text-lg",children:s(o?"coins.update":l==="avatar"?"coins.upload":"common.create")}),t.jsx("button",{onClick:()=>{p(!1),f(null),x({}),y([]),v(!1)},className:"flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600 transition-colors font-medium text-lg",children:s("coins.cancel")})]})]})}),P&&b&&t.jsx(R,{showModal:P,setShowModal:_,children:t.jsxs("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg p-8 mx-auto w-full h-full max-h-full overflow-y-auto max-w-6xl",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-3xl font-bold text-theme-text-primary dark:text-theme-dark-text",children:s("coins.manageAvatarsFor",{categoryName:b.name})}),t.jsxs("button",{onClick:()=>{C("avatar"),p(!0),_(!1)},className:"bg-theme-blue text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors font-medium text-lg",children:["+ ",s("coins.addAvatar")]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:Q.map(e=>t.jsxs("div",{className:"bg-theme-bg-primary dark:bg-theme-dark-bg rounded-lg border border-theme-border-light dark:border-theme-dark-border p-4",children:[t.jsx("div",{className:"mb-2",children:t.jsx("h3",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:e.name})}),t.jsx("div",{className:"text-center mb-3",children:t.jsx("img",{src:e.image_url,alt:e.name,className:"w-20 h-20 mx-auto rounded-lg object-cover",onError:a=>{a.target.src="https://via.placeholder.com/80x80?text=Avatar"}})}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mb-2",children:e.description||s("coins.noDescription")}),t.jsxs("div",{className:"space-y-1 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:s("coins.price")}),t.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400 font-bold flex items-center",children:[t.jsx(M,{type:"coin",className:"w-4 h-4 mr-1"}),e.price_coins]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:s("coins.status")}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.is_active?s("coins.active"):s("coins.inactive")})]})]}),t.jsxs("div",{className:"text-xs text-theme-text-secondary dark:text-theme-dark-text-secondary mb-4",children:[s("coins.id")," ",e.id]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>A(e,"avatar"),className:"flex-1 text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors",children:s("coins.edit")}),t.jsx("button",{onClick:()=>Y(e.id),className:"flex-1 text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors",children:s("coins.delete")})]})]},e.id))})]})})]})}export{me as default};
