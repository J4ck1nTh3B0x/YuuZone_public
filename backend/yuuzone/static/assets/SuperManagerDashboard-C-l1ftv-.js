import{a as Ce,A as De,r as p,Q as d,j as t,S as $,M as U}from"./vendor_react_core-CNRJGlP_.js";import{a as m}from"./vendor_axios-NIGUFBhG.js";import"./vendor_other-Cv4PqGe0.js";import"./vendor_socket_io_client-ClWRkI5z.js";function Pe(){const{t:a}=Ce(),{user:S}=De(),[j,E]=p.useState("coinShop"),[J,X]=p.useState([]),[Z,ee]=p.useState([]),[te,ae]=p.useState([]),[y,F]=p.useState(!1),[re,R]=p.useState(!0),[V,b]=p.useState(!1),[l,T]=p.useState(""),[i,x]=p.useState({}),[v,se]=p.useState(null),[ne,ie]=p.useState([]),[q,A]=p.useState(!1),[z,f]=p.useState([]),[L,k]=p.useState(!1),[o,N]=p.useState(null),[n,g]=p.useState({}),[I,W]=p.useState(!1),[M,H]=p.useState(""),[w,K]=p.useState(""),[_,oe]=p.useState([]),[Se,de]=p.useState(!1);p.useEffect(()=>{h()},[]),p.useEffect(()=>{window.self!==window.top&&(window.top.location=window.self.location);const e=document.createElement("style");return e.textContent=`
      .super-manager-dashboard {
        position: relative;
        z-index: 1000;
      }
      .super-manager-dashboard * {
        pointer-events: auto;
      }
      .super-manager-dashboard button {
        position: relative;
        z-index: 1001;
      }
    `,document.head.appendChild(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[]);const h=async()=>{try{R(!0);const[e,r,s,c,u]=await Promise.all([m.get("/api/coins/admin/avatar-categories"),m.get("/api/coins/admin/coin-packages"),m.get("/api/subscriptions/admin/tiers"),m.get("/api/coins/supermanager/demo-mode"),m.get("/api/coins/supermanager/demo-mode/users")]);e.data.success&&X(e.data.categories),r.data.success&&ee(r.data.packages),s.data.success&&ae(s.data.tiers),c.data.success&&F(c.data.demo_mode),u.data.success&&oe(u.data.users)}catch{d.error(a("coins.fetchError"))}finally{R(!1)}},ce=async()=>{var e,r;try{(await m.post("/api/coins/admin/avatar-categories",i)).data.success&&(d.success(a("coins.categoryCreated")),b(!1),x({}),f([]),k(!1),h())}catch(s){console.error("Category creation error:",s),d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.createError"))}},le=async()=>{var e,r;try{(await m.post("/api/coins/admin/coin-packages",i)).data.success&&(d.success(a("coins.packageCreated")),b(!1),x({}),f([]),k(!1),h())}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.createError"))}},me=async e=>new Promise(r=>{const s=new Image;s.onload=()=>r(!0),s.onerror=()=>r(!1),s.src=e,setTimeout(()=>r(!1),5e3)}),xe=async()=>{const e=[],r=o?n:i;return l==="category"?(!r.name||r.name.trim()==="")&&e.push(a("coins.superManager.validation.categoryNameRequired")):l==="package"?((!r.name||r.name.trim()==="")&&e.push(a("coins.superManager.validation.packageNameRequired")),(!r.coin_amount||r.coin_amount<=0)&&e.push(a("coins.superManager.validation.coinAmountRequired")),(!r.price_vnd||r.price_vnd<=0)&&e.push(a("coins.superManager.validation.priceVNDRequired"))):l==="tier"?((!r.name||r.name.trim()==="")&&e.push(a("coins.superManager.validation.tierNameRequired")),(!r.price_monthly||r.price_monthly<=0)&&e.push(a("coins.superManager.validation.monthlyPriceRequired")),r.coin_price&&r.coin_price<0&&e.push(a("coins.superManager.validation.coinPriceInvalid")),r.max_subthreads&&r.max_subthreads<-1&&e.push(a("coins.superManager.validation.maxSubthreadsInvalid"))):l==="avatar"&&((!r.name||r.name.trim()==="")&&e.push(a("coins.superManager.validation.avatarNameRequired")),(!r.price_coins||r.price_coins<=0)&&e.push(a("coins.superManager.validation.priceCoinsRequired")),o||(r.uploadMethod==="file"?r.imageFile||e.push(a("coins.superManager.validation.imageFileRequired")):r.uploadMethod==="url"&&(!r.image_url||r.image_url.trim()===""?e.push(a("coins.superManager.validation.imageUrlRequired")):!r.image_url.startsWith("http://")&&!r.image_url.startsWith("https://")?e.push(a("coins.superManager.validation.imageUrlInvalid")):[".jpg",".jpeg",".png",".gif",".webp",".bmp",".svg"].some(u=>r.image_url.toLowerCase().includes(u))&&await me(r.image_url)||e.push(a("coins.superManager.validation.imageUrlInvalid"))))),e},ge=async()=>{W(!0);const e=await xe();if(W(!1),e&&Array.isArray(e)&&e.length>0){f(e),k(!0);return}o?l==="category"?O():l==="package"?Q():l==="tier"?B():l==="avatar"&&Y():l==="category"?ce():l==="package"?le():l==="tier"?fe():l==="avatar"&&_e()},P=e=>{T(e),f([]),k(!1),x(e==="avatar"?{uploadMethod:"file"}:{}),b(!0)},pe=async e=>{var r,s;if(window.confirm(a("coins.superManager.confirmDeleteCategory")))try{(await m.delete(`/api/coins/admin/avatar-categories/${e}`)).data.success&&(d.success(a("coins.superManager.categoryDeleted")),h())}catch(c){d.error(((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.error)||a("coins.superManager.failedToDeleteCategory"))}},he=async e=>{var r,s;if(window.confirm(a("coins.superManager.confirmDeletePackage")))try{(await m.delete(`/api/coins/admin/coin-packages/${e}`)).data.success&&(d.success(a("coins.superManager.packageDeleted")),h())}catch(c){d.error(((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.error)||a("coins.superManager.failedToDeletePackage"))}},ue=async e=>{var r,s;if(window.confirm(a("coins.superManager.confirmDeleteAvatar")))try{(await m.delete(`/api/coins/admin/avatars/${e}`)).data.success&&(d.success(a("coins.superManager.avatarDeleted")),D(v.id))}catch(c){d.error(((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.error)||a("coins.superManager.failedToDeleteAvatar"))}},O=async()=>{var e,r;try{(await m.put(`/api/coins/admin/avatar-categories/${o.id}`,n)).data.success&&(d.success(a("coins.superManager.categoryUpdated")),N(null),g({}),h())}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.superManager.failedToUpdateCategory"))}},Q=async()=>{var e,r;try{(await m.put(`/api/coins/admin/coin-packages/${o.id}`,n)).data.success&&(d.success(a("coins.superManager.packageUpdated")),N(null),g({}),h())}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.superManager.failedToUpdatePackage"))}},Y=async()=>{var e,r;try{const s=new FormData;s.append("name",n.name),s.append("description",n.description||""),s.append("price_coins",n.price_coins),n.uploadMethod==="file"&&n.imageFile?s.append("image",n.imageFile):n.uploadMethod==="url"&&n.image_url&&s.append("image_url",n.image_url),(await m.put(`/api/coins/admin/avatars/${o.id}`,s,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(d.success(a("coins.superManager.avatarUpdated")),N(null),g({}),h())}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.superManager.failedToUpdateAvatar"))}},be=async()=>{var e,r;try{(await m.post("/api/coins/supermanager/demo-mode",{demo_mode:!y})).data.success&&(F(!y),d.success(a(y?"coins.superManager.demoModeDisabled":"coins.superManager.demoModeEnabled")))}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.superManager.demoModeToggleError"))}},ke=async()=>{var e,r;if(!M){d.error("Please select an email type");return}try{(await m.post("/api/coins/supermanager/test-mail",{email_type:M})).data.success&&(d.success(a("coins.superManager.testEmailSent")),H(""))}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.superManager.testEmailError"))}},ye=async(e,r)=>{var s,c;try{(await m.patch(`/api/subscriptions/admin/tiers/${e}/toggle`)).data.success&&(d.success(a(r?"coins.superManager.tierDisabled":"coins.superManager.tierEnabled")),h())}catch(u){d.error(((c=(s=u.response)==null?void 0:s.data)==null?void 0:c.error)||a("coins.superManager.failedToToggleTier"))}},ve=async e=>{var r,s;if(window.confirm(a("coins.superManager.confirmDeleteTier")))try{(await m.delete(`/api/subscriptions/admin/tiers/${e}`)).data.success&&(d.success(a("coins.superManager.tierDeleted")),h())}catch(c){d.error(((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.error)||a("coins.superManager.failedToDeleteTier"))}},fe=async()=>{var e,r;try{(await m.post("/api/subscriptions/admin/tiers",i)).data.success&&(d.success(a("coins.superManager.tierCreated")),b(!1),x({}),h())}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.superManager.createTierError"))}},B=async()=>{var e,r;try{(await m.put(`/api/subscriptions/admin/tiers/${o.id}`,n)).data.success&&(d.success(a("coins.superManager.tierUpdated")),N(null),g({}),h())}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.superManager.failedToUpdateTier"))}},G=async()=>{var e,r;if(!w.trim()){d.error("Please enter a username");return}try{const s=await m.post("/api/coins/supermanager/demo-mode/enable-for-user",{username:w.trim()});s.data.success&&(d.success(s.data.message),K(""),de(!1),h())}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||"Failed to enable demo mode for user")}},je=async e=>{var r,s;try{const c=await m.post(`/api/coins/supermanager/demo-mode/toggle-user/${e}`);c.data.success&&(d.success(c.data.message),h())}catch(c){d.error(((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.error)||"Failed to toggle demo mode for user")}},C=(e,r)=>{N(e),T(r),g({name:e.name,description:e.description||"",coin_amount:e.coin_amount,price_vnd:e.price_vnd,price_coins:e.price_coins,image_url:e.image_url,uploadMethod:"url"}),b(!0)},Ne=async(e,r)=>{var s,c;try{(await m.patch(`/api/coins/admin/avatar-categories/${e}/toggle`,{is_active:!r})).data.success&&(d.success(a(r?"coins.superManager.categoryDisabled":"coins.superManager.categoryEnabled")),h())}catch(u){d.error(((c=(s=u.response)==null?void 0:s.data)==null?void 0:c.error)||a("coins.superManager.failedToToggleCategory"))}},Me=async(e,r)=>{var s,c;try{(await m.patch(`/api/coins/admin/coin-packages/${e}/toggle`,{is_active:!r})).data.success&&(d.success(a(r?"coins.superManager.packageDisabled":"coins.superManager.packageEnabled")),h())}catch(u){d.error(((c=(s=u.response)==null?void 0:s.data)==null?void 0:c.error)||a("coins.superManager.failedToTogglePackage"))}},we=async e=>{se(e),await D(e.id),A(!0)},D=async e=>{try{const r=await m.get(`/api/coins/admin/avatar-categories/${e}/avatars`);r.data.success&&ie(r.data.avatars)}catch{d.error(a("coins.superManager.failedToFetchCategoryAvatars"))}},_e=async()=>{var e,r;try{let s={...i,category_id:v.id};if(i.imageFile){const c=new FormData;c.append("image",i.imageFile),c.append("name",i.name),c.append("description",i.description||""),c.append("price_coins",i.price_coins),c.append("category_id",v.id),(await m.post("/api/coins/admin/avatars/upload",c,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(d.success(a("coins.avatarUploaded")),b(!1),x({}),f([]),k(!1),D(v.id))}else(await m.post("/api/coins/admin/avatars",s)).data.success&&(d.success(a("coins.avatarCreated")),b(!1),x({}),f([]),k(!1),D(v.id))}catch(s){d.error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.error)||a("coins.avatarCreateError"))}};return re?t.jsx("div",{className:"flex justify-center items-center min-h-screen",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-theme-blue dark:border-blue-400"})}):t.jsxs("div",{className:"min-h-screen bg-theme-light-gray2 dark:bg-theme-dark-bg pt-20 px-4 super-manager-dashboard",children:[t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsx("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg shadow-md p-6 mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-2",children:a("coins.manageAvatarsAndCoinPackages")}),t.jsx("p",{className:"text-theme-text-secondary dark:text-theme-dark-text-secondary mt-2",children:a("coins.superManager.description")})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:a("coins.superManager.welcome",{username:S==null?void 0:S.username})}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.superManager.role")})]})]})}),t.jsx("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg shadow-md p-4 mb-6",children:t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("button",{onClick:()=>E("coinShop"),className:`px-6 py-2 rounded-lg font-medium transition-colors flex items-center justify-center whitespace-normal ${j==="coinShop"?"bg-theme-blue text-white":"text-theme-text-primary dark:text-theme-dark-text hover:bg-theme-bg-hover"}`,children:[t.jsx("span",{className:"mr-2",children:"🛍️"}),t.jsx("span",{className:"text-center",children:a("coins.superManager.coinShopSettings")})]}),t.jsxs("button",{onClick:()=>E("superMod"),className:`px-6 py-2 rounded-lg font-medium transition-colors flex items-center justify-center whitespace-normal ${j==="superMod"?"bg-theme-blue text-white":"text-theme-text-primary dark:text-theme-dark-text hover:bg-theme-bg-hover"}`,children:[t.jsx("span",{className:"mr-2",children:"⚙️"}),t.jsx("span",{className:"text-center",children:a("coins.superManager.superModSettings")})]}),t.jsxs("button",{onClick:()=>E("tierShop"),className:`px-6 py-2 rounded-lg font-medium transition-colors flex items-center justify-center whitespace-normal ${j==="tierShop"?"bg-theme-blue text-white":"text-theme-text-primary dark:text-theme-dark-text hover:bg-theme-bg-hover"}`,children:[t.jsx("span",{className:"mr-2",children:"👑"}),t.jsx("span",{className:"text-center",children:a("coins.superManager.tierShopSettings")})]})]})}),t.jsxs("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg shadow-md p-6",children:[j==="coinShop"&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-4",children:a("coins.superManager.avatarCategories")}),t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("p",{className:"text-theme-text-secondary dark:text-theme-dark-text-secondary",children:"Manage avatar categories and their items"}),t.jsx("button",{onClick:()=>P("category"),className:"bg-theme-blue text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:a("coins.superManager.addCategory")})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map(e=>t.jsxs("div",{className:"bg-theme-bg-primary dark:bg-theme-dark-bg rounded-lg border border-theme-border-light dark:border-theme-dark-border p-4",children:[t.jsx("div",{className:"mb-2",children:t.jsx("h3",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:e.name})}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mb-2",children:e.description||a("coins.noDescription")}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.is_active?a("coins.superManager.active"):a("coins.superManager.inactive")}),t.jsxs("span",{className:"text-xs text-theme-text-secondary dark:text-theme-dark-text-secondary",children:[a("coins.superManager.id")," ",e.id]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>we(e),className:"flex-1 text-xs bg-blue-500 dark:bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors",children:a("coins.manageAvatars")}),t.jsx("button",{onClick:()=>C(e,"category"),className:"flex-1 text-xs bg-green-500 dark:bg-green-600 text-white px-2 py-1 rounded hover:bg-green-600 dark:hover:bg-green-700 transition-colors",children:a("coins.superManager.edit")}),t.jsx("button",{onClick:()=>Ne(e.id,e.is_active),className:`flex-1 text-xs px-2 py-1 rounded transition-colors ${e.is_active?"bg-yellow-500 dark:bg-yellow-600 text-white hover:bg-yellow-600 dark:hover:bg-yellow-700":"bg-green-500 dark:bg-green-600 text-white hover:bg-green-600 dark:hover:bg-green-700"}`,children:e.is_active?a("coins.superManager.disable"):a("coins.superManager.enable")}),t.jsx("button",{onClick:()=>pe(e.id),className:"flex-1 text-xs bg-red-500 dark:bg-red-600 text-white px-2 py-1 rounded hover:bg-red-600 dark:hover:bg-red-700 transition-colors",children:a("coins.superManager.delete")})]})]},e.id))})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-4",children:a("coins.superManager.coinPackages")}),t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("p",{className:"text-theme-text-secondary dark:text-theme-dark-text-secondary",children:"Manage coin packages for purchase"}),t.jsx("button",{onClick:()=>P("package"),className:"bg-theme-blue text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:a("coins.superManager.addPackage")})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map(e=>t.jsxs("div",{className:"bg-theme-bg-primary dark:bg-theme-dark-bg rounded-lg border border-theme-border-light dark:border-theme-dark-border p-4",children:[t.jsx("div",{className:"mb-2",children:t.jsx("h3",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:e.name})}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.superManager.coins")}),t.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400 font-bold flex items-center",children:[t.jsx($,{type:"coin",className:"w-4 h-4 mr-1"}),e.coin_amount]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.superManager.price")}),t.jsxs("span",{className:"font-bold",children:[e.price_vnd.toLocaleString()," VND"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.is_active?a("coins.superManager.active"):a("coins.superManager.inactive")}),t.jsxs("span",{className:"text-xs text-theme-text-secondary dark:text-theme-dark-text-secondary",children:[a("coins.superManager.id")," ",e.id]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>C(e,"package"),className:"flex-1 text-xs bg-green-500 dark:bg-green-600 text-white px-2 py-1 rounded hover:bg-green-600 dark:hover:bg-green-700 transition-colors",children:a("coins.superManager.edit")}),t.jsx("button",{onClick:()=>Me(e.id,e.is_active),className:`flex-1 text-xs px-2 py-1 rounded transition-colors ${e.is_active?"bg-yellow-500 dark:bg-yellow-600 text-white hover:bg-yellow-600 dark:hover:bg-yellow-700":"bg-green-500 dark:bg-green-600 text-white hover:bg-green-600 dark:hover:bg-green-700"}`,children:e.is_active?a("coins.superManager.disable"):a("coins.superManager.enable")}),t.jsx("button",{onClick:()=>he(e.id),className:"flex-1 text-xs bg-red-500 dark:bg-red-600 text-white px-2 py-1 rounded hover:bg-red-600 dark:hover:bg-red-700 transition-colors",children:a("coins.superManager.delete")})]})]},e.id))})]})]}),j==="superMod"&&t.jsx("div",{children:t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-4",children:a("coins.superManager.superModSettings")}),t.jsx("p",{className:"text-theme-text-secondary dark:text-theme-dark-text-secondary mb-6",children:a("coins.superManager.superModDescription")}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 mb-8",children:[t.jsx("h3",{className:"text-xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-4",children:"Demo Mode"}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mb-2",children:a(y?"coins.superManager.demoModeActiveDescription":"coins.superManager.demoModeInactiveDescription")}),t.jsx("span",{className:`text-sm px-3 py-1 rounded-full ${y?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:a(y?"coins.superManager.demoModeActive":"coins.superManager.demoModeInactive")})]}),t.jsx("button",{onClick:be,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,style:{position:"relative",zIndex:1e3,pointerEvents:"auto"},onMouseDown:e=>{if(e.button===0&&e.detail!==0){if(e.target.dataset.lastClick&&Date.now()-parseInt(e.target.dataset.lastClick)<1e3){e.preventDefault();return}e.target.dataset.lastClick=Date.now().toString()}},onContextMenu:e=>e.preventDefault(),children:a(y?"coins.superManager.disableDemoMode":"coins.superManager.enableDemoMode")})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 mb-8",children:[t.jsx("h3",{className:"text-xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-4",children:"Active Demo Mode on someone else"}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mb-4",children:"Enable demo mode for specific users. Only SuperManagers can manage demo mode for other users."}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("input",{type:"text",value:w,onChange:e=>K(e.target.value),placeholder:"Enter username",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-theme-text-primary dark:text-theme-dark-text focus:ring-2 focus:ring-theme-blue focus:border-transparent",onKeyPress:e=>{e.key==="Enter"&&G()}}),t.jsx("button",{onClick:G,disabled:!w.trim(),className:`px-4 py-2 rounded-lg font-medium transition-colors ${w.trim()?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,style:{position:"relative",zIndex:1e3,pointerEvents:"auto"},onMouseDown:e=>{if(e.button===0&&e.detail!==0){if(e.target.dataset.lastClick&&Date.now()-parseInt(e.target.dataset.lastClick)<1e3){e.preventDefault();return}e.target.dataset.lastClick=Date.now().toString()}},onContextMenu:e=>e.preventDefault(),children:"Enable Demo Mode"})]})}),_.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsxs("h4",{className:"text-lg font-semibold text-theme-text-primary dark:text-theme-dark-text mb-3",children:["Users with Demo Mode Active (",_.length,")"]}),t.jsx("div",{className:"space-y-2",children:_.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-green-600 dark:text-green-400 text-sm font-bold",children:e.username.charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-theme-text-primary dark:text-theme-dark-text",children:e.username}),t.jsxs("p",{className:"text-xs text-theme-text-secondary dark:text-theme-dark-text-secondary",children:["Activated: ",new Date(e.updated_at).toLocaleString()]})]})]}),t.jsx("button",{onClick:()=>je(e.user_id),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-sm rounded-lg transition-colors",style:{position:"relative",zIndex:1e3,pointerEvents:"auto"},onMouseDown:r=>{if(r.button===0&&r.detail!==0){if(r.target.dataset.lastClick&&Date.now()-parseInt(r.target.dataset.lastClick)<1e3){r.preventDefault();return}r.target.dataset.lastClick=Date.now().toString()}},onContextMenu:r=>r.preventDefault(),children:"Disable"})]},e.user_id))})]}),_.length===0&&t.jsx("div",{className:"mt-6 text-center py-4",children:t.jsx("p",{className:"text-theme-text-secondary dark:text-theme-dark-text-secondary",children:"No users currently have demo mode enabled."})})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-4",children:a("coins.superManager.testMail")}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mb-4",children:a("coins.superManager.testMailDescription")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-theme-text-primary dark:text-theme-dark-text mb-2",children:a("coins.superManager.selectEmailType")}),t.jsxs("select",{value:M,onChange:e=>H(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-theme-text-primary dark:text-theme-dark-text focus:ring-2 focus:ring-theme-blue focus:border-transparent",children:[t.jsx("option",{value:"",children:a("coins.superManager.selectEmailType")}),t.jsx("option",{value:"verification",children:a("coins.superManager.verificationEmail")}),t.jsx("option",{value:"welcome",children:a("coins.superManager.welcomeEmail")}),t.jsx("option",{value:"login_alert",children:a("coins.superManager.loginAlertEmail")}),t.jsx("option",{value:"password_reset",children:a("coins.superManager.passwordResetEmail")}),t.jsx("option",{value:"change_confirmation",children:a("coins.superManager.changeConfirmationEmail")}),t.jsx("option",{value:"account_deletion",children:a("coins.superManager.accountDeletionEmail")}),t.jsx("option",{value:"account_deletion_verification",children:a("coins.superManager.accountDeletionVerificationEmail")}),t.jsx("option",{value:"coin_purchase",children:a("coins.superManager.coinPurchaseEmail")}),t.jsx("option",{value:"subscription_purchase",children:a("coins.superManager.subscriptionPurchaseEmail")}),t.jsx("option",{value:"subscription_cancelled",children:a("coins.superManager.subscriptionCancelledEmail")}),t.jsx("option",{value:"subscription_expired",children:a("coins.superManager.subscriptionExpiredEmail")})]})]}),t.jsx("button",{onClick:ke,disabled:!M,className:`px-4 py-2 rounded-lg font-medium transition-colors ${M?"bg-theme-blue hover:bg-blue-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,style:{position:"relative",zIndex:1e3,pointerEvents:"auto"},onMouseDown:e=>{if(e.button===0&&e.detail!==0){if(e.target.dataset.lastClick&&Date.now()-parseInt(e.target.dataset.lastClick)<1e3){e.preventDefault();return}e.target.dataset.lastClick=Date.now().toString()}},onContextMenu:e=>e.preventDefault(),children:a("coins.superManager.sendTestEmail")})]})]})]})}),j==="tierShop"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-theme-text-primary dark:text-theme-dark-text",children:a("coins.superManager.tierShopSettings")}),t.jsx("button",{onClick:()=>P("tier"),className:"bg-theme-blue text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:a("coins.superManager.addTier")})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:te.map(e=>t.jsxs("div",{className:`bg-theme-bg-primary dark:bg-theme-dark-bg rounded-lg border border-theme-border-light dark:border-theme-dark-border p-4 ${e.is_default?"ring-2 ring-blue-500":""}`,children:[t.jsx("div",{className:"mb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:e.name}),e.is_default&&t.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded-full",children:"Default Tier"})]})}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mb-2",children:e.description||a("coins.noDescription")}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.superManager.monthlyPrice")}),t.jsxs("span",{className:"font-bold",children:[e.price_monthly.toLocaleString()," VND"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.superManager.coinPrice")}),t.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400 font-bold flex items-center",children:[t.jsx($,{type:"coin",className:"w-4 h-4 mr-1"}),e.coin_price||"N/A"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.superManager.maxSubthreads")}),t.jsx("span",{className:"font-bold",children:e.max_subthreads===-1||e.max_subthreads===null?"INF":e.max_subthreads})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.superManager.canCustomTheme")}),t.jsx("span",{className:`text-sm ${e.can_custom_theme?"text-green-600":"text-red-600"}`,children:e.can_custom_theme?"Yes":"No"})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.is_active?a("coins.superManager.active"):a("coins.superManager.inactive")}),t.jsxs("span",{className:"text-xs text-theme-text-secondary dark:text-theme-dark-text-secondary",children:[a("coins.superManager.id")," ",e.id]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>C(e,"tier"),className:"flex-1 text-xs bg-green-500 dark:bg-green-600 text-white px-2 py-1 rounded hover:bg-green-600 dark:hover:bg-green-700 transition-colors",children:a("coins.superManager.edit")}),!e.is_default&&t.jsx("button",{onClick:()=>ye(e.id,e.is_active),className:`flex-1 text-xs px-2 py-1 rounded transition-colors ${e.is_active?"bg-yellow-500 dark:bg-yellow-600 text-white hover:bg-yellow-600 dark:hover:bg-yellow-700":"bg-green-500 dark:bg-green-600 text-white hover:bg-green-600 dark:hover:bg-green-700"}`,children:e.is_active?a("coins.superManager.disable"):a("coins.superManager.enable")}),!e.is_default&&t.jsx("button",{onClick:()=>ve(e.id),className:"flex-1 text-xs bg-red-500 dark:bg-red-600 text-white px-2 py-1 rounded hover:bg-red-600 dark:hover:bg-red-700 transition-colors",children:a("coins.superManager.delete")}),e.is_default&&t.jsx("div",{className:"flex-1 text-xs bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-400 px-2 py-1 rounded text-center",children:"Protected"})]})]},e.id))})]})]})]}),V&&t.jsx(U,{showModal:V,setShowModal:b,children:t.jsxs("div",{className:`bg-white dark:bg-theme-dark-card rounded-lg p-6 mx-auto w-full max-h-fit overflow-y-auto ${l==="avatar"?"max-w-6xl":"max-w-4xl"}`,children:[t.jsx("h2",{className:"text-2xl font-bold text-theme-text-primary dark:text-theme-dark-text mb-4",children:a(o?l==="category"?"coins.editAvatarCategory":l==="package"?"coins.editCoinPackage":l==="tier"?"coins.superManager.editTier":"coins.editAvatar":l==="category"?"coins.createAvatarCategory":l==="package"?"coins.createCoinPackage":l==="tier"?"coins.superManager.createTier":"coins.uploadAvatar")}),l==="category"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.categoryName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:o?n.name||"":i.name||"",onChange:e=>o?g({...n,name:e.target.value}):x({...i,name:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.enterCategoryName")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:a("coins.description")}),t.jsx("textarea",{value:o?n.description||"":i.description||"",onChange:e=>o?g({...n,description:e.target.value}):x({...i,description:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.enterDescription"),rows:"4"})]})]}),l==="package"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.packageName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:o?n.name||"":i.name||"",onChange:e=>o?g({...n,name:e.target.value}):x({...i,name:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.enterPackageName")})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.coinAmount")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:o?n.coin_amount||"":i.coin_amount||"",onChange:e=>o?g({...n,coin_amount:parseInt(e.target.value)}):x({...i,coin_amount:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.enterCoinAmount")})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.priceVND")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:o?n.price_vnd||"":i.price_vnd||"",onChange:e=>o?g({...n,price_vnd:parseInt(e.target.value)}):x({...i,price_vnd:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.enterPriceVND")})]})]}),l==="avatar"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.avatarName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:o?n.name||"":i.name||"",onChange:e=>o?g({...n,name:e.target.value}):x({...i,name:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.enterAvatarName")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:a("coins.description")}),t.jsx("textarea",{value:o?n.description||"":i.description||"",onChange:e=>o?g({...n,description:e.target.value}):x({...i,description:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.enterAvatarDescription"),rows:"3"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.superManager.avatarImage")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"radio",name:"uploadMethod",value:"file",checked:(o?n.uploadMethod:i.uploadMethod)==="file",onChange:e=>o?g({...n,uploadMethod:e.target.value}):x({...i,uploadMethod:e.target.value}),className:"w-5 h-5 text-theme-blue"}),t.jsx("span",{className:"text-lg text-theme-text-primary dark:text-theme-dark-text",children:a("coins.superManager.fileUpload")})]}),t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"radio",name:"uploadMethod",value:"url",checked:(o?n.uploadMethod:i.uploadMethod)==="url",onChange:e=>o?g({...n,uploadMethod:e.target.value}):x({...i,uploadMethod:e.target.value}),className:"w-5 h-5 text-theme-blue"}),t.jsx("span",{className:"text-lg text-theme-text-primary dark:text-theme-dark-text",children:a("coins.superManager.urlUpload")})]})]}),(o?n.uploadMethod:i.uploadMethod)==="file"?t.jsx("div",{className:"mt-3",children:t.jsx("input",{type:"file",accept:"image/*",onChange:e=>o?g({...n,imageFile:e.target.files[0]}):x({...i,imageFile:e.target.files[0]}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text"})}):t.jsx("div",{className:"mt-3",children:t.jsx("input",{type:"url",value:o?n.image_url||"":i.image_url||"",onChange:e=>o?g({...n,image_url:e.target.value}):x({...i,image_url:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.superManager.enterImageUrl")})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.superManager.priceCoins")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:o?n.price_coins||"":i.price_coins||"",onChange:e=>o?g({...n,price_coins:parseInt(e.target.value)}):x({...i,price_coins:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.enterAvatarPrice")})]})]}),l==="tier"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.superManager.tierName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:o?n.name||"":i.name||"",onChange:e=>o?g({...n,name:e.target.value}):x({...i,name:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.superManager.enterTierName")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:a("coins.description")}),t.jsx("textarea",{value:o?n.description||"":i.description||"",onChange:e=>o?g({...n,description:e.target.value}):x({...i,description:e.target.value}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.superManager.enterTierDescription"),rows:"3"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:[a("coins.superManager.monthlyPrice")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:o?n.price_monthly||"":i.price_monthly||"",onChange:e=>o?g({...n,price_monthly:parseInt(e.target.value)}):x({...i,price_monthly:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.superManager.enterMonthlyPrice")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:a("coins.superManager.coinPrice")}),t.jsx("input",{type:"number",value:o?n.coin_price||"":i.coin_price||"",onChange:e=>o?g({...n,coin_price:parseInt(e.target.value)}):x({...i,coin_price:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.superManager.enterCoinPrice")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-medium text-theme-text-primary dark:text-theme-dark-text mb-3",children:a("coins.superManager.maxSubthreads")}),t.jsx("input",{type:"number",value:o?n.max_subthreads||"":i.max_subthreads||"",onChange:e=>o?g({...n,max_subthreads:parseInt(e.target.value)}):x({...i,max_subthreads:parseInt(e.target.value)}),className:"w-full px-4 py-3 text-lg border border-theme-border-light dark:border-theme-dark-border rounded-lg bg-theme-bg-primary dark:bg-theme-dark-bg text-theme-text-primary dark:text-theme-dark-text",placeholder:a("coins.superManager.enterMaxSubthreads")}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mt-1",children:a("coins.superManager.maxSubthreadsHelp")})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",checked:o?n.can_custom_theme||!1:i.can_custom_theme||!1,onChange:e=>o?g({...n,can_custom_theme:e.target.checked}):x({...i,can_custom_theme:e.target.checked}),className:"w-5 h-5 text-theme-blue"}),t.jsx("span",{className:"text-lg text-theme-text-primary dark:text-theme-dark-text",children:a("coins.superManager.canCustomTheme")})]})})]}),t.jsxs("div",{className:"flex space-x-4 mt-6",children:[t.jsx("button",{onClick:o?l==="category"?O:l==="package"?Q:l==="tier"?B:Y:ge,disabled:I,className:`flex-1 py-3 px-6 rounded-lg transition-colors font-medium text-lg ${I?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed text-gray-600 dark:text-gray-400":"bg-theme-blue hover:bg-blue-600 text-white"}`,children:a(I?"common.loading":o?"coins.update":l==="avatar"?"coins.upload":"coins.superManager.create")}),t.jsx("button",{onClick:()=>{b(!1),N(null),g({}),f([]),k(!1)},className:"flex-1 bg-gray-500 dark:bg-gray-600 text-white py-3 px-6 rounded-lg hover:bg-gray-600 dark:hover:bg-gray-700 transition-colors font-medium text-lg",children:a("coins.cancel")})]})]})}),L&&z.length>0&&t.jsx(U,{showModal:L,setShowModal:k,children:t.jsxs("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg p-8 mx-auto w-full max-w-md",children:[t.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-4",children:a("common.error")}),t.jsx("div",{className:"space-y-2 mb-6",children:z.map((e,r)=>t.jsxs("p",{className:"text-red-600 dark:text-red-400 text-sm",children:["• ",e]},r))}),t.jsx("button",{onClick:()=>k(!1),className:"w-full bg-red-600 dark:bg-red-700 hover:bg-red-700 dark:hover:bg-red-800 text-white py-2 px-4 rounded-lg transition-colors",children:a("common.close")})]})}),q&&v&&t.jsx(U,{showModal:q,setShowModal:A,children:t.jsxs("div",{className:"bg-white dark:bg-theme-dark-card rounded-lg p-8 mx-auto w-full h-full max-h-full overflow-y-auto max-w-6xl",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-3xl font-bold text-theme-text-primary dark:text-theme-dark-text",children:a("coins.manageAvatarsFor",{categoryName:v.name})}),t.jsxs("button",{onClick:()=>{T("avatar"),b(!0),A(!1)},className:"bg-theme-blue text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors font-medium text-lg",children:["+ ",a("coins.superManager.addAvatar")]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:ne.map(e=>t.jsxs("div",{className:"bg-theme-bg-primary dark:bg-theme-dark-bg rounded-lg border border-theme-border-light dark:border-theme-dark-border p-4",children:[t.jsx("div",{className:"mb-2",children:t.jsx("h3",{className:"text-lg font-bold text-theme-text-primary dark:text-theme-dark-text",children:e.name})}),t.jsx("div",{className:"text-center mb-3",children:t.jsx("img",{src:e.image_url,alt:e.name,className:"w-20 h-20 mx-auto rounded-lg object-cover",onError:r=>{r.target.src="https://via.placeholder.com/80x80?text=Avatar"}})}),t.jsx("p",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary mb-2",children:e.description||a("coins.noDescription")}),t.jsxs("div",{className:"space-y-1 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.price")}),t.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400 font-bold flex items-center",children:[t.jsx($,{type:"coin",className:"w-4 h-4 mr-1"}),e.price_coins]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-theme-text-secondary dark:text-theme-dark-text-secondary",children:a("coins.status")}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.is_active?a("coins.active"):a("coins.inactive")})]})]}),t.jsxs("div",{className:"text-xs text-theme-text-secondary dark:text-theme-dark-text-secondary mb-4",children:[a("coins.id")," ",e.id]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>C(e,"avatar"),className:"flex-1 text-xs bg-green-500 dark:bg-green-600 text-white px-2 py-1 rounded hover:bg-green-600 dark:hover:bg-green-700 transition-colors",children:a("coins.edit")}),t.jsx("button",{onClick:()=>ue(e.id),className:"flex-1 text-xs bg-red-500 dark:bg-red-600 text-white px-2 py-1 rounded hover:bg-red-600 dark:hover:bg-red-700 transition-colors",children:a("coins.delete")})]})]},e.id))})]})})]})}export{Pe as default};
